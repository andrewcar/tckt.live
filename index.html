<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" type="text/css" href="style.css"/>
  Hoods
  <br>
  <A HREF="privacypolicy">Privacy Policy</A>
  <br>
  <script src="https://js.stripe.com/v3/"></script>
  <script type="text/javascript">
  <div id="payment-request-button">
    var stripe = Stripe('pk_live_lc0mlT8Gdy4YetGNkdMukCvG');
    var paymentRequest = stripe.paymentRequest({
      country: 'US',
      currency: 'usd',
      total: {
        label: 'Hoods',
        amount: 10,
      },
      requestPayerName: true,
      requestPayerEmail: true
    });
    var elements = stripe.elements();
    var paymentRequestButton = elements.create('paymentRequestButton', {
      paymentRequest: paymentRequest,
    });

    // Check the availability of the Payment Request API first
    paymentRequest.canMakePayment().then(function(result) {
      if (result) {
        paymentRequestButton.mount('#payment-request-button');
      } else {
        document.getElementById('payment-request-button').style.display = 'none';
      }
    });

    paymentRequest.on('token', function(ev) {
      // Send the token to your server to charge it!
      fetch('/charges', {
        method: 'POST',
        body: JSON.stringify({token: ev.token.id}),
        headers: {'content-type': 'application/json'},
      })
      .then(function(response) {
        if (response.ok) {
          // Report to the browser that the payment was successful, prompting
          // it to close the browser payment interface.
          ev.complete('success');
        } else {
          // Report to the browser that the payment failed, prompting it to
          // re-show the payment interface, or show an error message and close
          // the payment interface.
          ev.complete('fail');
        }
      });
    });

    elements.create('paymentRequestButton', {
      paymentRequest: paymentRequest,
      style: {
        paymentRequestButton: {
          type: 'buy',
          theme: 'default',
          height: '64px',
        },
      },
    });
  </div>
  </script>


</head>
</html>
